# Sortrace Edge Updater

The `edge-updater` repository provides all scripts needed for setting up and managing Sortrace truck devices remotely. It ensures devices can be installed, configured, and updated easily through a unified setup process.

---

## Repository Overview

| Script       | Purpose                                                                           |
| :----------- | :-------------------------------------------------------------------------------- |
| `install.sh` | Quickly installs and updates all necessary files and scripts from the repository. |

---

## Installation Instructions

To install and configure a Sortrace device in one line, run:

```bash
curl -fsSL https://raw.githubusercontent.com/sortrace/edge-public-installer/main/install.sh | sudo bash -s -- --scaleway-token "<your-scaleway-token>" --hostname "edge-truck-001" --tailscale-key "<your-tailscale-key>" --sim-pin "1234" --wifi-ssid "YourSSID" --wifi-password "YourWiFiPassword"
```

> ⚡ **Important:**  
> You must provide:
>
> - A **Scaleway Token** (required)
> - A **Tailscale Auth Key** (required)

---

### How to generate a Tailscale Auth Key

1. Go to your Tailscale Admin Console:  
   👉 [https://login.tailscale.com/admin/settings/keys](https://login.tailscale.com/admin/settings/keys)

2. Click **"Create key"**.

3. Choose options:

   - **Tags:** _(Optional) Assign tags if needed for ACLs._
   - **Ephemeral:** _(Optional) You can leave it off for Sortrace devices._
   - **Reusable:** ✅ Enable **Reusable**, so you can use the key multiple times if needed.
   - **Expiration:** Set a reasonable expiration (e.g., 7 days).

4. After configuring, **click "Generate Key"**.

5. Copy the **Auth Key** string shown in the **Install Script** generated by Tailscale.  
   (It will look like: `tskey-auth-XXXXXXXXXXXXXXXXXXXXXXXXXXXX`)

✅ Paste this key into the `--tailscale-key` argument when installing the Sortrace device.

> ⚠️ **Important:**  
> Tailscale Auth Keys are **secret** — do not share them publicly.

---

### Supported Arguments for `install.sh`

| Argument           | Purpose                                                     |
| :----------------- | :---------------------------------------------------------- |
| `--scaleway-token` | Scaleway token to authenticate config fetches.              |
| `--hostname`       | Set a new hostname for the device. Must start with `edge-`. |
| `--tailscale-key`  | Tailscale auth key to automatically join the VPN network.   |
| `--sim-pin`        | SIM PIN code to unlock and enable 4G connection.            |
| `--wifi-ssid`      | WiFi SSID if connecting via WiFi.                           |
| `--wifi-password`  | WiFi password if connecting via WiFi.                       |
